{% extends "base.html" %}
{% block content %}
    <div id="app">
        <video id="video_content" width="960" height="720" :src="'/media/' + article.id + '/' + article.movie_name" :poster="'/media/' + article.id + '/thumb.jpg'" controls></video>
        [[article.created_at|time_format]]
    </div>
    <script src="https://unpkg.com/vue"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.23.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.23.0/locale/ja.js"></script>
    <script>
        var vm = new Vue({
            delimiters: ['[[', ']]'],
            el: '#app',
            data: {
               keyword:"",
               article: null,
            },
            methods: {
                window:onload = function() {

                    axios.get("{% url 'error_resolve_app:detail_article'%}")//ここでDjangoに送信
                    .then(function (response) { 
                          vm.article = response.data;//response.dataに詳細を表示させたいarticleが入っている
                        
                        })
                        
                        .catch(function (error) {
                            console.log(error);
                        })
                        .then(function () {
                        });


                    }

            },
            filters: {//日本時間に直す
                time_format: function (date) {
                    return moment(date).format('YYYY/MM/DD HH:mm');// eslint-disable-line
                }
            },
        });
    </script>
{% endblock %}